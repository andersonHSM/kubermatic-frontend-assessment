<div class="flex flex-col gap-4">
    <div class="flex w-full justify-between">
        <h1 class="text-3xl">List Clusters</h1>
        <p-button
                label="Add Cluster"
                icon="pi pi-plus"
                (onClick)="createCluster()"
        />
    </div>
    <p-table
		#table
        dataKey="id"
        (onSort)="onSort($event)"
        [value]="(clusters$ | async) ?? []"
    >
        <ng-template #header>
            <tr>
                <th>Status</th>
                <th pSortableColumn="name">
                    <div class="flex items-center gap-2">
                        <span>Name</span>
                        <p-sortIcon field="code"/>
                    </div>
                </th>
                <th>Region</th>
                <th>Version</th>
                <th>Node Count</th>
                <th class="w-30"></th>
            </tr>
            <tr>
                <th></th>
                <th>
                    <input
                            pInputText
                            type="text"
                            class="w-full"
                            placeholder="Filter by name"
                            [(ngModel)]="nameFilter"
                    />
                </th>
                <th>
                    <input
                            pInputText
                            class="w-full"
                            type="text"
                            placeholder="Filter by region (code or name)"
                            [(ngModel)]="regionFilter"
                    />
                </th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template
			#body
			let-cluster
        >
            <tr>
                <td>{{ cluster.status }}</td>
                <td>{{ cluster.name }}</td>
                <td>{{ cluster.region.name }}</td>
                <td>{{ cluster.version.version }}</td>
                <td>{{ cluster.nodeCount }}</td>
                <td class="w-30">
                    <p-confirmpopup></p-confirmpopup>
                    <div class="flex justify-end gap-6">
                        <p-button
                                (click)="editCluster(cluster)"
                                severity="primary"
                                icon="pi pi-user-edit"
                        />
                        <p-button
                                (click)="deleteCluster($event, cluster)"
                                severity="danger"
                                icon="pi pi-times-circle text-white"
                        />
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <app-cluster-wizard
            (clusterSaved)="updateList()"
            [(visible)]="visible"
            [(cluster)]="selectedCluster"
            [action]="action"
    />
</div>
<p-toast></p-toast>
